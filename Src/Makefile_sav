# Makefile 
#-------------------------------------------

CMP = mpicc
CMPS = gnu

#CFLAGS := -c -std=c99 -Wall -Wextra -pedantic -O3 -Wfloat-equal -ggdb
# -Werror -std=c99 -Wextra -Wfloat-equal
#CFLAGS := -c -Wall -Wshadow -Wextra -Warray-bounds -pedantic -O3


ifeq ($(CMPS), gnu)
ifeq ($(debug), y)
	CFLAGS := -c -Wall -Wshadow -Wextra -Warray-bounds -pedantic
else
ifeq ($(hard), y)
	CFLAGS := -c -O3
else
	CFLAGS := -c
endif
endif
endif





all: FBL_INV

SRC := $(wildcard *.c)
OBJS := $(SRC:.c=.o)
#OBJ := $(patsubst %.c,%.o,$(wildcard *.c))

%.o: %.c
	$(CMP) $(CFLAGS) -o $@ $< 

FBL_INV: $(OBJS)
	$(CMP) -o FBL_INV $(OBJS) -L.  -lgsl -lgslcblas  -lm
	mv FBL_INV ../

.PHONY:clean

clean:
	find . -maxdepth 2 -name "*.o" -delete 
	find . -maxdepth 2 -name "FBL_INV" -delete 